<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <defs>
    <linearGradient id="parentGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4A90D9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#357ABD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="childGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#F5A623;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#D48806;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="eventGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#7B68EE;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#9370DB;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrowRed" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#E74C3C"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#333">
    嵌套滚动冲突：问题场景
  </text>
  
  <!-- Parent Container (SquareScreen with verticalScroll) -->
  <rect x="50" y="60" width="300" height="380" rx="10" fill="url(#parentGrad)" filter="url(#shadow)"/>
  <text x="200" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">
    父容器 (verticalScroll)
  </text>
  
  <!-- Header -->
  <rect x="70" y="110" width="260" height="40" rx="5" fill="white" opacity="0.9"/>
  <text x="200" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">Header 区域</text>
  
  <!-- KLineChart (Child) -->
  <rect x="70" y="160" width="260" height="180" rx="8" fill="url(#childGrad)" filter="url(#shadow)"/>
  <text x="200" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    KLineChart
  </text>
  <text x="200" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white">
    (水平滚动 + 缩放)
  </text>
  
  <!-- K-Line visual representation -->
  <g transform="translate(90, 230)">
    <line x1="0" y1="50" x2="220" y2="50" stroke="white" stroke-width="1" opacity="0.3"/>
    <line x1="0" y1="70" x2="220" y2="70" stroke="white" stroke-width="1" opacity="0.3"/>
    <!-- Candles -->
    <rect x="20" y="35" width="8" height="40" fill="#4CAF50"/>
    <rect x="40" y="25" width="8" height="35" fill="#4CAF50"/>
    <rect x="60" y="40" width="8" height="25" fill="#F44336"/>
    <rect x="80" y="30" width="8" height="45" fill="#4CAF50"/>
    <rect x="100" y="35" width="8" height="30" fill="#F44336"/>
    <rect x="120" y="20" width="8" height="55" fill="#4CAF50"/>
    <rect x="140" y="45" width="8" height="25" fill="#F44336"/>
    <rect x="160" y="30" width="8" height="40" fill="#4CAF50"/>
    <rect x="180" y="35" width="8" height="35" fill="#4CAF50"/>
  </g>
  
  <!-- Footer -->
  <rect x="70" y="350" width="260" height="70" rx="5" fill="white" opacity="0.9"/>
  <text x="200" y="390" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">Footer 区域</text>
  
  <!-- Vertical scroll indicator -->
  <text x="360" y="250" font-family="Arial, sans-serif" font-size="20" fill="#4A90D9">↕</text>
  <text x="380" y="250" font-family="Arial, sans-serif" font-size="12" fill="#666">垂直滚动</text>
  
  <!-- Problem illustration -->
  <g transform="translate(480, 80)">
    <rect x="0" y="0" width="280" height="360" rx="10" fill="#FFF5F5" stroke="#E74C3C" stroke-width="2"/>
    <text x="140" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#E74C3C">
      ❌ 问题：事件被吃掉
    </text>
    
    <!-- Touch Event -->
    <circle cx="50" cy="80" r="25" fill="url(#eventGrad)" filter="url(#shadow)"/>
    <text x="50" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white">触摸</text>
    
    <!-- Arrow to KLineChart -->
    <line x1="80" y1="80" x2="150" y2="130" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- KLineChart box -->
    <rect x="130" y="120" width="120" height="50" rx="5" fill="#F5A623"/>
    <text x="190" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white">KLineChart</text>
    
    <!-- consume() call -->
    <rect x="130" y="185" width="120" height="35" rx="5" fill="#E74C3C"/>
    <text x="190" y="207" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">consume() 调用</text>
    
    <!-- Arrow down -->
    <line x1="190" y1="170" x2="190" y2="185" stroke="#E74C3C" stroke-width="2" marker-end="url(#arrowRed)"/>
    
    <!-- X mark -->
    <circle cx="190" cy="260" r="25" fill="#E74C3C" opacity="0.2"/>
    <text x="190" y="268" text-anchor="middle" font-family="Arial, sans-serif" font-size="28" fill="#E74C3C">✗</text>
    
    <!-- Parent container blocked -->
    <rect x="130" y="300" width="120" height="40" rx="5" fill="#ccc" stroke="#999" stroke-dasharray="5,5"/>
    <text x="190" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">父容器收不到事件</text>
    
    <!-- Arrow blocked -->
    <line x1="190" y1="285" x2="190" y2="300" stroke="#999" stroke-width="2" stroke-dasharray="5,5"/>
  </g>
  
  <!-- Legend -->
  <g transform="translate(500, 460)">
    <rect x="0" y="0" width="15" height="15" fill="#4A90D9"/>
    <text x="22" y="12" font-family="Arial, sans-serif" font-size="11" fill="#333">父容器</text>
    <rect x="80" y="0" width="15" height="15" fill="#F5A623"/>
    <text x="102" y="12" font-family="Arial, sans-serif" font-size="11" fill="#333">子组件</text>
    <rect x="160" y="0" width="15" height="15" fill="#E74C3C"/>
    <text x="182" y="12" font-family="Arial, sans-serif" font-size="11" fill="#333">问题点</text>
  </g>
</svg>
